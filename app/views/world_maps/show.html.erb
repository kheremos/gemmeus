<% local_map = @world_map.image_array(@radius, @x, @y) %>

<table border="0" id="map">
  <tr>
    <th></th>
    <% for x in @x-@radius..@x+@radius %>
        <th><%= x %></th>
    <% end %>
    <th></th>
  </tr>
  <% for y in @y-@radius..@y+@radius %>
      <tr>
        <td id="map"><b>
          <%= "#{y}" %></b>
        </td>
        <% for x in (@x-@radius)..@x+@radius %>
            <td>
              <% this_string = "#{x},#{y}" %>
              <% image = "#{WorldMap::IMAGE_MAP[local_map[this_string]]}" %>
              <% puts "Seaching for: #{this_string}" unless WorldMap::IMAGE_MAP[local_map[this_string]] %>
              <%= image_tag("#{image}", :size => "25x25", :id => "map", :border => 0) %>
            </td>
        <% end %>
        <td id="map"><b>
          <%= "#{y}" %></b>
        </td>
      </tr>
  <% end %>
  <tr>
    <th></th>
    <% for x in @x-@radius..@x+@radius %>
        <th><%= x %></th>
    <% end %>
    <th></th>
  </tr>
</table>

<table>
  <tr>
    <td>↖</td>
    <td>&#8593;</td>
    <td>↗</td>
  </tr>
  <tr>
    <td>
      <%= link_to update_position_path, {:x => (@x+1), :y => (@y+1)}, :remote => true, :class => 'button' do %>
          &larr;
      <% end %>
    </td>
    <td>S</td>
    <td>&rarr;</td>
  </tr>
  <tr>
    <td>↙</td>
    <td>
      <%= link_to update_position_path, {:x => (@x+1)}, :remote => true, :class => 'button' do %>
          &#8595;
      <% end %>
    </td>
    <td>↘</td>
  </tr>
</table>
<p id="notice"><%= notice %></p>
